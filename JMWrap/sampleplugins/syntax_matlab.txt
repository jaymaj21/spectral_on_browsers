userproc syntaxMatlab {widget} {
    
    syntaxBegin $widget;
    set keywords {
        abs acker acos ans asin atan axis bode break c2d case catch ceil
        classdef clear clf conv cos cosh cov ctrb deconv default det do 
        dlqr eig elseif end eps else error eval events exp eye feedback 
        figure floor for format function grid gtext help hold  if imag 
        impulse Inf input inv  keywords legend length linspace lnyquist
        load log log10 loglog logspace lqr lsim margin max mean methods 
        min minreal NaN norm nyquist1 obsv ones otherwise pi place plot
        poly polyval print prod properties pzmap rand rank real reshape
        return rlocfind rlocus roots round rscale save set sgrid sign sin
        sinh size sqrt ss ssdata stairs std step subplot sum switch tan 
        text tf tfdata title try wbw while xlabel ylabel zeros zgrid
        plot3 uniquetol peaks view categorical fileparts short long 
                }
    
    setAutoComplete $keywords; 
    syntaxColorForWords $widget keywords red $keywords
    syntaxColorForRegex $widget  {
         numbers             #3aa905      {[-+]?([0-9]+\.?[0-9]*|\.[0-9]+)([eE][-+]?[0-9]+)?[ij]?}
         imaginary           #3aa905      {\m[+-]?[ij]\M}
         strings             blue         {"([^"\\]*(\\.[^"\\]*)*)"|\'([^\'\\]*(\\.[^\'\\]*)*)\'} 
         singleLineComment   #44616a      {%.*$}
         preproc             #44616a      {^[:blank]*#.*((\\\n.*)?)*}
                  
    }
     
    
    syntaxColorForChars $widget operators #2b7d35 {[]{}()<>=+-*;^$!:.&}
    syntaxEnd $widget;
     
}

[getmenu].syntax add command -label "Matlab" -command "syntaxMatlab [editor]";

